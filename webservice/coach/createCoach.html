<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
        function showAllCoach(){
            $.ajax({
                    type:"get",
                    url:"http://localhost:2828/coach",
                    success:function (data){
                        let content="";
                        for (let i=0;i<data.length;i++){
                            content+=`<tr><td>${data[i].id}</td>
        <td>${data[i].name}</td>
        <td>${data[i].country}</td>
        <td>${data[i].achievement}</td>
        <td>${data[i].salary}</td>
        <td>${data[i].role}</td>
        <td>${data[i].username}</td>
        <td>${data[i].password}</td>
        <td>${data[i].image}</td>

        <td><a href="${data[i].id}" onclick="deleteCoach(this)">Delete</a></td></tr>
        <td><a href="${data[i].id}" onclick="showFormUpdate(this)">Update</a></td></tr>`;
                        }
                        document.getElementById("list").innerHTML = content;

                    }
                }
            )
        }
        showAllCoach();


        function createCoach() {
            let formData = new FormData();
            let name = $('#input-1').val();
            let country = $('#input-2').val();
            let achievement = $('#input-3').val();
            let salary = $('#input-4').val();
            let role = $('#input-5').val();
            let username = $('#input-6').val();
            let password = $('#input-7').val();
            let image = $('#input-8')[0].files[0];
            formData.append('name', name);
            formData.append('country', country);
            formData.append('achievement', achievement);
            formData.append('salary', salary);
            formData.append('role', role);
            formData.append('username', username);
            formData.append('password', password);
            formData.append('avaFile', image);
            $.ajax({
                contentType: false,
                processData: false,
                enctype: 'multipart/form-data',
                dataType: "json",
                type: "POST",
                url: "http://localhost:2828/coach",
                data: formData,
                success: function (data) {
                    console.log(data);
                }
            })
            event.preventDefault();
        }

        function updateCoach() {
            let id = $('#id').val();
            let name = $('#name').val();
            let country = $('#country').val();
            let achievement = $('#achievement').val();
            let salary = $('#salary').val();
            let role = $('#role').val();
            let image = $('#image').val();
            let editCoach={
                name:name,
                country:country,
                achievement:achievement,
                salary:salary,
                role:role,
                image:image,
            }
            $.ajax({
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                type: "put",
                url: "http://localhost:2828/coach/"+id,
                data:JSON.stringify(editCoach),
                success: function (data) {
                    console.log("cap nhat thanh cong"+editCoach)
                    showAllCoach();
                }
            })

            event.preventDefault();
        }

        function deleteCoach(element){

            let id=element.getAttribute("href");
            $.ajax({
                type: "delete",
                url: "http://localhost:2828/coach/"+id,
                success:function (date){
                    console.log("Xoa thanh cong ");
                    showAllCoach();
                }
            })
            event.preventDefault();
        }
    </script>
</head>
<body>
<table>
    <tr>
        <td>name</td>
        <td><input type="text" name="name" id="input-1"></td>
    </tr>
    <tr>
        <td>country</td>
        <td><input type="text" name="country" id="input-2"></td>
    </tr>
    <tr>
        <td>achievement</td>
        <td><input type="text" name="achievement" id="input-3"></td>
    </tr>
    <tr>
        <td>salary</td>
        <td><input type="text" name="salary" id="input-4"></td>
    </tr>
    <tr>
        <td>role</td>
        <td><input type="text" name="role" id="input-5"><br></td>
    </tr>
    <tr>
        <td>username</td>
        <td><input type="text" name="username" id="input-6"></td>
    </tr>
    <tr>
        <td>password</td>
        <td><input type="text" name="password" id="input-7"></td>
    </tr>
    <tr>
        <td>avatar</td>
        <td><input type="file" name="avatar" id="input-8"></td>
    </tr>
    <tr>
        <td>
            <button onclick="createCoach()">AddNewCoach</button>
        </td>
    </tr>


</table>

<!--<table>-->
<!--    <input id="id">-->
<!--    <td> <input id="name"></td>-->
<!--    <input id="country">-->
<!--    <input id="achievement">-->
<!--    <input id="salary">-->
<!--    <input id="role">-->
<!--    <input id="image">-->
<!--    <button onclick="addNewCoach(this)">Add</button>-->
<!--    <button onclick="updateCoach(this)">Update</button>-->

<!--    <input type="submit" id="search" value="Search" onclick="searchCoach()">-->
<!--</table>-->

<table>
    <tr>
        <td>Id</td>
        <td>Name</td>
        <td>Country</td>
        <td>Achievement</td>
        <td>Salary</td>
        <td>Role</td>
        <td>Image</td>
    </tr>

    <tr id="list"><br/>
    </tr>
</table>
<!--<script src="home.js"></script>-->
</body>
</html>