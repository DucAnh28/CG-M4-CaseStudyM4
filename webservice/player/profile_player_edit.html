<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="sorttable.js" type="text/javascript"></script>
  <script>
//done show all player
    function showAllPlayer(){
      $.ajax({
                type:"get",
                url:"http://localhost:2828/player/list-player",
                success:function (data){
                  let content="";
                  for (let i=0;i<data.length;i++){
                    content+=`<tr>
        <td>${data[i].id}</td>
        <td>${data[i].country}</td>
        <td>${data[i].height}</td>
        <td>${data[i].weight}</td>
        <td>${data[i].introduction}</td>
        <td>${data[i].name}</td>
        <td>${data[i].salary}</td>
        <td><img src="${'http://localhost:2828'+data[i].avatarURL}" width="80" height="80" alt="img"></td>
        <td><a href="${data[i].id}" onclick="deletePlayer(this)">Delete</a></td>
        <td><a href="${data[i].id}" onclick="showFormUpdate(this)">Update</a></td></tr>`;
                  }
                  document.getElementById("list").innerHTML = content;

                }
              }
      )
    }
    showAllPlayer();

//done create player
    function createPlayer() {
      let formData = new FormData();
      let name = $('#name').val();
      let country = $('#country').val();
      let weight = $('#weight').val();
      let height = $('#height').val();
      let salary = $('#salary').val();
      let introduction = $('#introduction').val();
      let image = $('#image')[0].files[0];
      formData.append('name', name);
      formData.append('country', country);
      formData.append('weight', weight);
      formData.append('height', height);
      formData.append('salary', salary);
      formData.append('introduction', introduction);
      formData.append('avaFile', image);
      $.ajax({
        contentType: false,
        processData: false,
        enctype: 'multipart/form-data',
        dataType: "json",
        type: "POST",
        url: "http://localhost:2828/coach/player/create",
        data: formData,
        success: function (data) {
          console.log(data);
          showAllPlayer();
        }
      })

    }
    function showFormUpdate(element){
      let id = element.getAttribute("href");
      $.ajax({
        headers: {
          'Accept': 'application/json',
          'Content-Type': 'application/json'
        },
        type: "get",
        url: "http://localhost:2828/player/find-player-by-id/"+id,
        success: function (data) {
          console.log(data);
          console.log(id);
          $('#id').attr('value',`${data.id}`)
          $('#name').attr('value',`${data.name}`)
          $('#country').attr('value',`${data.country}`)
          $('#introduction').attr('value',`${data.introduction}`)
          $('#salary').attr('value',`${data.salary}`)
          // $('#role').attr('value',`${data.role}`)
          $('#image').attr('value',`${data.image}`)
        }

      })

      event.preventDefault();
    }

    function updatePlayer() {
      let formData = new FormData();
      let id = $('#id').val();
      let name = $('#name').val();
      let country = $('#country').val();
      let weight = $('#weight').val();
      let height = $('#height').val();
      let introduction = $('#introduction').val();
      let salary = $('#salary').val();
      let image = $('#image')[0].files[0];
      formData.append('name', name);
      formData.append('country', country);
      formData.append('weight', weight);
      formData.append('height', height);
      formData.append('introduction', introduction);
      formData.append('salary', salary);
      formData.append('avaFile', image);
      $.ajax({
        contentType: false,
        processData: false,
        enctype: 'multipart/form-data',
        dataType: "json",
        type: "put",
        url: "http://localhost:2828/player/edit-player/"+id,
        data: formData,
        success: function (data) {
          console.log(data);
          showAllPlayer();
        }
      })

      event.preventDefault();
    }
// done delete player
    function deletePlayer(element){

      let id=element.getAttribute("href");
      $.ajax({
        type: "delete",
        url: "http://localhost:2828/coach/player/delete/"+id,
        success:function (date){
          console.log("Xoa thanh cong ");
          showAllPlayer();
        }
      })
      event.preventDefault();
    }
    // function sortSalaryAsc(){
    //   $.ajax({
    //     headers: {
    //       'Accept': 'application/json',
    //       'Content-Type': 'application/json'
    //     },
    //     type:"get",
    //     url: "http://localhost:2828/player/sortAsc/",
    //     success:function (data){
    //       let content="";
    //       for (let i=0;i<data.length;i++){
    //         content+=`<tr>
    //     <td>${data[i].id}</td>
    //     <td>${data[i].name}</td>
    //     <td>${data[i].country}</td>
    //     <td>${data[i].achievement}</td>
    //     <td>${data[i].salary}</td>
    //     <td>${data[i].role}</td>
    //     <td><img src="${'http://localhost:2828'+data[i].avatarURL}" width="80" height="80" alt="img"></td>
    //     <td><a href="${data[i].id}" onclick="deleteCoach(this)">Delete</a></td>
    //     <td><a href="${data[i].id}" onclick="showFormUpdate(this)">Update</a></td></tr>`;
    //       }
    //       document.getElementById("list").innerHTML = content;
    //
    //       console.log(data);
    //
    //       console.log("sort thanh cong")
    //
    //     }
    //   })
    // }

    // function sortSalaryDesc(){
    //   $.ajax({
    //     headers: {
    //       'Accept': 'application/json',
    //       'Content-Type': 'application/json'
    //     },
    //     type:"get",
    //     url: "http://localhost:2828/player/sortDesc/",
    //     success:function (data){
    //       let content="";
    //       for (let i=0;i<data.length;i++){
    //         content+=`<tr>
    //     <td>${data[i].id}</td>
    //     <td>${data[i].name}</td>
    //     <td>${data[i].country}</td>
    //     <td>${data[i].achievement}</td>
    //     <td>${data[i].salary}</td>
    //     <td>${data[i].role}</td>
    //     <td><img src="${'http://localhost:2828'+data[i].avatarURL}" width="80" height="80" alt="img"></td>
    //     <td><a href="${data[i].id}" onclick="deletePlayer(this)">Delete</a></td>
    //     <td><a href="${data[i].id}" onclick="showFormUpdate(this)">Update</a></td></tr>`;
    //       }
    //       document.getElementById("list").innerHTML = content;
    //
    //       console.log(data);
    //
    //       console.log("sort thanh cong")
    //
    //     }
    //   })
    // }
  </script>
</head>
<body>
<table>
  <tr>
    <td>id</td>
    <td><input type="text" name="id" id="id"></td>
  </tr>
  <tr>
    <td>name</td>
    <td><input type="text" name="name" id="name"></td>
  </tr>
  <tr>
    <td>country</td>
    <td><input type="text" name="country" id="country"></td>
  </tr>
  <tr>
    <td>weight</td>
    <td><input type="text" name="weight" id="weight"></td>
  </tr>
  <tr>
    <td>height</td>
    <td><input type="text" name="height" id="height"></td>
  </tr>
  <tr>
    <td>salary</td>
    <td><input type="text" name="salary" id="salary"></td>
  </tr>
  <tr>
    <td>introduction</td>
    <td><input type="text" name="introduction" id="introduction"><br></td>
  </tr>
<!--    <tr>-->
<!--        <td>salary</td>-->
<!--        <td><input type="text" name="role" id="role"><br></td>-->
<!--  <tr>-->
    <td>avatar</td>
    <td><input type="file" name="avatar" id="image"></td>
  </tr>
  <tr>
    <td>
      <button onclick="createPlayer()">AddNewPlayer</button>
    </td>
  </tr>
  <tr>
    <td>
      <button onclick="updatePlayer()">UpdatePlayer</button>
    </td>
  </tr>
  <tr>
    <td>
      <button onclick="sortSalaryAsc()">Lương tăng dần</button>
    </td>
  </tr>
  <tr>
    <td>
      <button onclick="sortSalaryDesc()">Lương giảm dần</button>
    </td>
  </tr>
</table>
<select>
  <option >Sắp xếp lương</option>
  <option onchange="sortSalaryAsc()">Lương tăng dần</option>
  <option onchange="sortSalaryDesc()">Lương giảm dần</option>
</select>
<table border="1" >
  <tr>
    <td>Id</td>
    <td>Country</td>
    <td>Height</td>
    <td>Weight</td>
    <td>Introduction</td>
    <td>Name</td>
    <td>Salary</td>
    <td>Image</td>
    <td>Action</td>
    <td>Action</td>
  </tr>
  <tbody id="list"></tbody>
</table>
<!--<script src="home.js"></script>-->
</body>
</html>